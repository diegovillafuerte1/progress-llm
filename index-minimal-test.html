<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> 
    <title>Progress Knight - Minimal Test</title>
</head>
<body id="body" class="dark">
    <div class="w3-margin"> 
        <h1>Progress Knight - Minimal Adventure System Test</h1>
        <div style="width: 1220px; height: 600px"> 
            <div class="panel w3-padding" style="width: 300px; height: auto; float: left">
                <span id="deathText">
                    <div style="font-size: large; color: red">Age has caught up to you</div>
                    <div class="sidebar-element" style="color: gray">Your age has met your lifespan, use the amulet to rebirth before you pass away</div>
                </span>

                <div class="" style="font-size: large">Age <span id="ageDisplay">14</span> Day <span id="dayDisplay">0</span></div>
                <div class="sidebar-element" style="color: gray">Lifespan: <span id="lifespanDisplay">70</span> years</div>
                
                <button id="pauseButton" class="w3-button button sidebar-element" onClick="setPause()">Pause</button>

                <span id="automation" class="inline" style="margin-left: 8px">
                    <span>
                        <div class="inline">Auto-promote</div>
                        <input type="checkbox" class="inline" id="autoPromote">
                    </span>
                    </br>
                    <span>
                        <div class="inline">Auto-learn</div>
                        <input type="checkbox" class="inline sidebar-element" id="autoLearn">
                    </span>
                </span>

                <div style="font-size: large" id="coinDisplay">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div style="color: gray">Balance (in coins)</div>

                <ul class="sidebar-element" style="padding-left: 20px;">
                    <li><span style="color: rgb(9, 160, 230)">Net/day: </span ><b id="signDisplay"></b><span id="netDisplay">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </span></li>
                    <li><span style="color: rgb(9, 160, 230)">Income/day: </span><span id="incomeDisplay">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </span></li>
                    <li><span style="color: rgb(9, 160, 230)">Expenses/day: </span><span id="expenseDisplay">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </span></li>
                </ul>

                <div class="sidebar-element" style="color: gray">Evil: <span id="evilDisplay">0</span></div>
                <div class="sidebar-element" style="color: gray">Rebirth One Count: <span id="rebirthOneCountDisplay">0</span></div>
                <div class="sidebar-element" style="color: gray">Rebirth Two Count: <span id="rebirthTwoCountDisplay">0</span></div>
            </div>

            <div class="panel w3-padding" style="width: 920px; height: auto; float: right" id="mainContent">
                <div class="w3-bar w3-black">
                    <button class="w3-bar-item w3-button" onclick="setTab(this, 'jobs')">Jobs</button>
                    <button class="w3-bar-item w3-button" onclick="setTab(this, 'skills')">Skills</button>
                    <button class="w3-bar-item w3-button" onclick="setTab(this, 'shop')">Shop</button>
                    <button class="w3-bar-item w3-button" onclick="setTab(this, 'rebirth')">Amulet</button>
                </div>

                <div class="tab" id="jobs">
                    <table id="jobTable" class="w3-table w3-bordered">
                    </table>
                </div>

                <div class="tab" id="skills">
                    <table id="skillTable" class="w3-table w3-bordered">
                    </table>
                </div>

                <div class="tab" id="shop">
                    <table id="itemTable" class="w3-table w3-bordered">
                    </table>
                </div>

                <div class="tab" id="rebirth">
                    <h2>ðŸŒŸ Minimal Adventure System Test</h2>
                    <p>This is the refactored minimal adventure system test.</p>
                    
                    <ul>
                        <li style="margin: 8px;">
                            You stumble across a strange looking amulet on your 25th birthday. It does not look like
                            it has any worth on the market given that it's made from cheap-looking copper. However, you
                            feel a weird urge to keep the amulet, so you slip it into your pocket for safekeeping.
                            <div style="margin-top: 8px;">
                                <button class="w3-button button w3-green" onclick="startAdventure('age25')">ðŸŒŸ Start Adventure (Age 25)</button>
                            </div>
                        </li>
                        <li style="margin: 8px;">
                            On your 45th birthday, you feel the amulet shiver uncontrollably in your pocket. You take it
                            out and the constant shivering suddenly stops. More to your bizarre surprise, you notice
                            a strange etching on the centre of the amulet.
                            <div style="margin-top: 8px;">
                                <button class="w3-button button w3-green" onclick="startAdventure('age45')">ðŸŒŸ Start Adventure (Age 45)</button>
                            </div>
                        </li>
                        <li style="margin: 8px;">
                            On your 65th birthday, you once again encounter the strange, unexplained shivering from your
                            amulet. This time, the etching has grown more intricate and detailed.
                            <div style="margin-top: 8px;">
                                <button class="w3-button button w3-green" onclick="startAdventure('age65')">ðŸŒŸ Start Adventure (Age 65)</button>
                            </div>
                        </li>
                        <li style="margin: 8px;">
                            On your 200th birthday, the amulet finally reveals its true power and purpose.
                            <div style="margin-top: 8px;">
                                <button class="w3-button button w3-green" onclick="startAdventure('age200')">ðŸŒŸ Start Adventure (Age 200)</button>
                            </div>
                        </li>
                    </ul>
                    
                    <!-- Mistral API Configuration -->
                    <div style="margin-top: 20px; padding: 20px; border: 2px solid #2196F3; border-radius: 8px; background-color: rgba(33, 150, 243, 0.1);">
                        <h3 style="color: #2196F3; margin-bottom: 15px;">ðŸ¤– Mistral API Configuration</h3>
                        <div style="margin-bottom: 15px;">
                            <label for="mistralApiKey" style="display: block; margin-bottom: 10px; font-weight: bold;">Mistral API Key:</label>
                            <input type="password" id="mistralApiKey" placeholder="Enter your Mistral API key" style="width: 400px; padding: 8px; border: 1px solid #ccc; border-radius: 3px;">
                            <button class="w3-button button" onclick="saveApiKey()" style="margin-left: 10px;">Save Key</button>
                            <br>
                            <small style="color: #666;">Get your free API key at <a href="https://console.mistral.ai" target="_blank">console.mistral.ai</a></small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Core game scripts (original main.js) -->
    <script type="text/javascript" src="js/HackTimer.js"></script>
    <script type="text/javascript" src="js/classes.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    
    <!-- Minimal Adventure System -->
    <script type="text/javascript" src="js/main-adventure-minimal.js"></script>
    
    <!-- Initialize everything -->
    <script>
        // Initialize the minimal adventure system after main.js loads
        setTimeout(() => {
            initializeAdventureSystem();
            
            // Open default tab (Jobs)
            const jobsTab = document.querySelector('[onclick*="jobs"]');
            if (jobsTab) jobsTab.click();
        }, 100);
    </script>
</body>
</html>
