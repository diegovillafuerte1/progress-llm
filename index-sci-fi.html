<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <link rel="stylesheet" type="text/css" href="css/dark.css">
    <link rel="stylesheet" type="text/css" href="css/sci-fi-theme.css">
    <link rel="stylesheet" type="text/css" href="css/components.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <title>Progress Knight - Sci-Fi Analytics Dashboard</title>
</head>
<body id="body" class="dark" data-theme="dark">
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1 class="text-2xl font-bold text-accent">Progress Knight</h1>
                <div class="control-panel">
                    <button id="pauseButton" class="control-button" onclick="setPause()">Pause</button>
                    <button class="control-button" onclick="setLightDarkMode()">Theme</button>
                </div>
            </div>
            <div class="header-right">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="ageDisplay">14</span> years, <span id="dayDisplay">0</span> days
                </div>
                <div class="status-indicator">
                    <div class="status-dot warning"></div>
                    Lifespan: <span id="lifespanDisplay">70</span> years
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <!-- Main Counter (sci-fi) -->
            <div class="big-counter" id="sciFiBigCounter">
                <div class="big-counter-value" id="sciFiBigCounterValue">0</div>
                <div class="big-counter-label">Credits</div>
            </div>

            <!-- Original coinDisplay retained for game logic formatting -->
            <div style="font-size: large" id="coinDisplay" class="sr-only">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>

            <!-- Rate Chip -->
            <div class="rate-chip">
                <div class="rate-chip-trend"></div>
                <div class="rate-chip-value">0</div>
                <div class="rate-chip-label">/day</div>
            </div>

            <!-- Automation Controls -->
            <div class="control-panel" style="flex-direction: column; align-items: flex-start; margin: var(--space-4) 0;">
                <h3 class="text-sm font-semibold text-secondary mb-2">AUTOMATION SYSTEMS</h3>
                <div class="checkbox-group">
                    <label class="checkbox-item">
                        <input type="checkbox" id="autoPromote" class="mr-2">
                        <span class="text-sm">Auto-promote</span>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" id="autoLearn" class="mr-2">
                        <span class="text-sm">Auto-learn</span>
                    </label>
                </div>
            </div>

            <!-- Current Activity -->
            <div class="current-activity">
                <h3 class="text-sm font-semibold text-secondary mb-2">CURRENT MISSION</h3>
                <div id="quickTaskDisplay">
                    <div class="progress-bar progressBar job" style="width: 100%; margin-bottom: var(--space-2);">
                        <div class="progress-fill progressFill" style="background-color: var(--accent-primary);"></div>
                        <div class="progress-text name">Task</div>
                    </div>
                    <div class="text-xs text-muted mb-3">Current job</div>

                    <div class="progress-bar progressBar skill" style="width: 100%;">
                        <div class="progress-fill progressFill" style="background-color: var(--accent-secondary);"></div>
                        <div class="progress-text name">Task</div>
                    </div>
                    <div class="text-xs text-muted">Current skill</div>
                </div>
            </div>

            <!-- Stats Panel -->
            <div class="stats-panel">
                <h3 class="text-sm font-semibold text-secondary mb-2">MISSION STATS</h3>
                <div class="stat-item">
                    <span class="text-sm text-accent">Happiness:</span>
                    <span class="text-sm font-mono" id="happinessDisplay">1.0</span>
                </div>
                <div class="stat-item">
                    <span class="text-sm text-warning">Evil:</span>
                    <span class="text-sm font-mono" id="evilDisplay">0.0</span>
                </div>
                <div class="stat-item">
                    <span class="text-sm text-danger">Time Warp:</span>
                    <span class="text-sm font-mono" id="timeWarpingDisplay">x1.00</span>
                </div>
            </div>

            <!-- Prestige Card -->
            <div class="prestige-card">
                <div class="prestige-card-title">Prestige System</div>
                <div class="prestige-card-shards" id="prestige-shards">0</div>
                <div class="prestige-card-multiplier" id="prestige-multiplier">x1.0</div>
                <button class="prestige-card-button" onclick="showPrestigeModal()">
                    Prestige Now
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Navigation Tabs -->
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="jobs">Production</button>
                <button class="nav-tab" data-tab="skills">Skills</button>
                <button class="nav-tab" data-tab="shop">Upgrades</button>
                <button class="nav-tab" data-tab="rebirth">Prestige</button>
                <button class="nav-tab" data-tab="settings">Settings</button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Jobs Tab -->
                <div class="tab" id="jobs">
                    <h2 class="text-xl font-semibold mb-4">Production Systems</h2>
                    <div class="upgrade-grid">
                        <template class="requiredRowTemplate">
                            <td class="w3-text-gray" style="padding-left: 16px" colspan=5>
                                Required: 
                                <span class="value" colspan=5>
                                    <span class="levels"></span>
                                    <span class="coins">
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                    </span>
                                    <span style="color: rgb(200, 0, 0)" class="evil"></span>
                                </span>
                            </td> 
                        </template>
                        <template class="headerRowTaskTemplate">
                            <tr>
                                <th class="category" style="width: 250px">Job</th>
                                <th>Level</th>
                                <th class="valueType">Value type</th>
                                <th>Xp/day</th>
                                <th>Xp left</th>
                                <th class="maxLevel">Max level</th>
                                <th class="skipSkill">Skip</th>
                            </tr>
                        </template>
                        <template class="rowTaskTemplate">
                            <tr>
                                <td>
                                    <div class="progress-bar progressBar tooltip">
                                        <div class="progress-fill progressFill"></div>
                                        <div class="progress-text name">Task</div>
                                        <span class="tooltipText"></span>
                                    </div>
                                </td>
                                <td class="level">Level</td>
                                <td class="value">
                                    <div class="effect"></div>
                                    <div class="income">
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                    </div>
                                </td>
                                <td class="xpGain">Xp/day</td>
                                <td class="xpLeft">Xp left</td>
                                <td class="maxLevel">
                                    <input class="checkbox" type="checkbox"></input>
                                </td>
                                <td class="skipSkill">Skip</td>
                            </tr>
                        </template>
                        <table id="jobTable" class="w3-table w3-bordered">
                        </table>
                    </div>
                </div>

                <!-- Skills Tab -->
                <div class="tab" id="skills">
                    <h2 class="text-xl font-semibold mb-4">Skill Development</h2>
                    <div class="upgrade-grid">
                        <table id="skillTable" class="w3-table w3-bordered">
                        </table>
                    </div>
                </div>

                <!-- Shop Tab -->
                <div class="tab" id="shop">
                    <h2 class="text-xl font-semibold mb-4">Equipment & Upgrades</h2>
                    <div class="upgrade-grid">
                        <table id="itemTable" class="w3-table w3-bordered">
                        </table>
                    </div>
                </div>

                <!-- Rebirth Tab -->
                <div class="tab" id="rebirth">
                    <h2 class="text-xl font-semibold mb-4">Prestige System</h2>
                    <div class="prestige-content">
                        <div class="prestige-story">
                            <p class="text-sm text-secondary mb-4">
                                You stumble across a strange looking amulet on your 25th birthday. It does not look like
                                it has any worth on the market given that it's made from cheap-looking copper. However, you
                                feel a weird urge to keep the amulet, so you slip it into your pocket for safekeeping.
                            </p>
                            <div id="adventureButton25" style="margin-top: 8px; display: none;">
                                <button class="control-button" onclick="startAdventure('age25')">🌟 Start Adventure</button>
                            </div>
                        </div>
                        
                        <div class="prestige-story">
                            <p class="text-sm text-secondary mb-4">
                                On your 45th birthday, you feel the amulet shiver uncontrollably in your pocket. You take it
                                out and the constant shivering suddenly stops. More to your bizarre surprise, you notice
                                a strange etching on the centre of the amulet.
                            </p>
                            <div id="adventureButton45" style="margin-top: 8px; display: none;">
                                <button class="control-button" onclick="startAdventure('age45')">🌟 Start Adventure</button>
                            </div>
                        </div>
                        
                        <div class="prestige-story">
                            <p class="text-sm text-secondary mb-4">
                                On your 65th birthday, you once again encounter the strange, unexplained shivering from your
                                amulet. But this time, a living eyeball emerges from the centre. Although terribly frightened,
                                you realise you do not have many years to live left anyway so you consider touching the eye
                                to see what happens.
                            </p>
                            <div id="adventureButton65" style="margin-top: 8px; display: none;">
                                <button class="control-button" onclick="startAdventure('age65')">🌟 Start Adventure</button>
                            </div>
                            <button class="control-button" onclick="rebirthOne()">Touch the Eye</button>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab" id="settings">
                    <h2 class="text-xl font-semibold mb-4">System Settings</h2>
                    <div class="settings-grid">
                        <div class="setting-group">
                            <h3 class="text-lg font-semibold mb-2">Data Management</h3>
                            <div class="control-panel">
                                <button class="control-button" onclick="importGameData()">Import</button>
                                <button class="control-button" onclick="exportGameData()">Export</button>
                            </div>
                            <input id="importExportBox" type="text" class="w-full mt-2 p-2 bg-space-panel border border-space-border rounded-md text-primary" placeholder="Paste save data here">
                        </div>
                        
                        <div class="setting-group">
                            <h3 class="text-lg font-semibold mb-2">Display Settings</h3>
                            <div class="control-panel">
                                <button class="control-button" onclick="setLightDarkMode()">Toggle Theme</button>
                            </div>
                        </div>
                        
                        <div class="setting-group">
                            <h3 class="text-lg font-semibold mb-2">Danger Zone</h3>
                            <button class="control-button" style="background: var(--accent-danger); color: white;" onclick="resetGameData()">Reset Game</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-container">
                <div class="chart-panel">
                    <div class="chart-title">Credits Over Time</div>
                    <canvas class="chart-canvas" id="line-chart" width="400" height="200"></canvas>
                </div>
                <div class="chart-panel">
                    <div class="chart-title">Income Sources (Last 60s)</div>
                    <canvas class="chart-canvas" id="bar-chart" width="400" height="200"></canvas>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-left">
                <span class="text-sm text-secondary">Progress Knight v2.0 - Sci-Fi Analytics Dashboard</span>
            </div>
            <div class="footer-right">
                <a href="https://discord.gg/fTRS4pHGka" target="_blank" class="text-sm text-accent hover:text-primary transition-colors">
                    Join Discord Community
                </a>
            </div>
        </footer>
    </div>

    <!-- Adventure Container Overlay -->
    <div id="adventureContainer" class="adventure-overlay" style="display: none;">
        <div class="adventure-overlay-content">
            <button class="adventure-close-btn" onclick="window.adventureSystem?.endCareerBasedAdventure(); document.getElementById('adventureContainer').style.display='none';">✕</button>
            <!-- Adventure content will be dynamically inserted here -->
        </div>
    </div>

    <!-- Scripts -->
    <script type="text/javascript" src="node_modules/loglevel/dist/loglevel.min.js"></script>
    <script type="text/javascript" src="js/HackTimer.js"></script>
    <script type="text/javascript" src="js/classes.js"></script>
    <script type="text/javascript" src="js/main.js?v=5"></script>
    <script type="text/javascript" src="js/main-adventure-minimal.js"></script>
    <script type="text/javascript" src="js/ads.js"></script>
    <script type="text/javascript" src="js/ui-components.js"></script>

    <!-- Initialize the sci-fi UI -->
    <script>
        // Initialize the sci-fi UI after main.js loads
        setTimeout(() => {
            if (typeof SciFiUI !== 'undefined') {
                window.sciFiUI = new SciFiUI();
            }
        }, 100);

        // Initialize the minimal adventure system
        setTimeout(() => {
            if (typeof initializeAdventureSystem === 'function') {
                initializeAdventureSystem();
            }
        }, 100);
    </script>
</body>
</html>


